<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <title data-section="title" data-value="page-title">ADAP</title>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous" />
    <link rel="icon" href="">
    {% load static %}
    <link rel="stylesheet" href="{% static 'Formulario/styles/vistas.css' %}">
    <script src="{% static 'Formulario/js/language.js' %}" defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    
    <header class="container-fluid">
        <div class="row" style="background-color: #43A941; align-items: center;">
            <div class="col">
                <img src="{% static 'Formulario/images/Logo.png' %}" style="width: 30%;" class="float-start">
            </div>
            <div class="col d-flex justify-content-end" style="color: white;">
                <form action="{% url 'Inicio_sesion:signout' %}" method="post">
                    {% csrf_token %}
                    <button class="logout-button" type="submit">Logout</button>
                </form>
            </div>
        </div>
    </header>
    <main class="container-fluid">

        <div class="row">
            <div class="col-md-4 d-flex justify-content-center" style="background-color: #F2F2F2; text-align: center;">
                <div class="text-center">
                    <!-- <div class="avatar-container">
                        <img src="http://ssl.gstatic.com/accounts/ui/avatar_2x.png" class="avatar img-circle img-thumbnail" alt="avatar" style="margin-top: 50px; border-radius: 50%;">
                        <form method="POST" enctype="multipart/form-data" action="{% url 'Formulario:uploadProfilePicture' %}">
                            {% csrf_token %}
                            <input type="file" name="profile_picture" class="text-center center-block file-upload" style="margin-left: 85px;">
                            <button type="submit" style="background-color: #43A941; margin-top: 10px;">Upload Profile Picture</button>
                        </form>
                        <div class="form-group">
                            <label data-section="profile" data-value="company-name"></label>
                            <span>{{ company_info.companyName }}</span>
                        </div>
                    </div> -->
                    
                    <div class="tab-content" style="margin-top: 80px; margin-left: 50px; text-align: start;">
                        <div class="form-group">
                            <label for="email" style="font-size: 30px; align-items: center;">{{ user_info.first_name }} {{ user_info.last_name }}</label>
                        </div>
                        <div class="form-group">
                            <label data-section="profile" data-value="company-name" style="font-size: 30px; align-items: center;">{{ company_info.companyName }}</label>
                        </div>
                        <div class="form-group">
                                
                            <label data-section="profile" data-value="foundation-date">Foundation date:</label>
                            <span>{{ company_info.foundationDate }}</span>
                        </div>
                        <div class="form-group">
                            <label data-section="profile" data-value="email">Email:</label>
                            <span>{{ company_info.email }}</span>
                        </div>
                        <div class="form-group">
                            <label data-section="profile" data-value="phone">Phone:</label>
                            <span>{{ company_info.phone }}</span>
                        </div>
                        <div class="form-group">
                            <label data-section="profile" data-value="country-residence">Country of residence:</label>
                            <span>{{ company_info.country }}</span>
                        </div>
                        <form method="get" action="{% url 'Formulario:editCompanyProfileView' %}">
                            {% csrf_token %}
                            <button type="submit" style="background-color: #43A941; margin-top: 20px; margin-bottom: 20px;">Edit profile</button> 
                        </form>
                        <!-- <div class="tab-pane acive" id="home1">
                            <div class="form-group">
                                <label data-section="profile" data-value="company-name"></label>
                                <span>{{ company_info.companyName }}</span>
                            </div>
                            <div class="form-group">
                                <label for="email">Email: {{ company_info.companyName }}</label>
                                <label data-section="profile" data-value="company-name">{{ company_info.companyName }} fgdgd</label>
                                <span> sdf</span>
                            </div>
                            <div class="form-group">
                                
                                <label data-section="profile" data-value="foundation-date">Foundation date:</label>
                                <span>{{ company_info.foundationDate }}</span>
                            </div>
                            <div class="form-group">
                                <label data-section="profile" data-value="email">Email:</label>
                                <span>{{ company_info.email }}</span>
                            </div>
                            <div class="form-group">
                                <label data-section="profile" data-value="phone">Phone:</label>
                                <span>{{ company_info.phone }}</span>
                            </div>
                            <div class="form-group">
                                <label data-section="profile" data-value="country-residence">Country of residence:</label>
                                <span>{{ company_info.country }}</span>
                            </div>
                            <form method="get" action="{% url 'Formulario:editCompanyProfileView' %}">
                                {% csrf_token %}
                                <button type="submit" style="background-color: #43A941; margin-top: 20px; margin-bottom: 20px;">Edit profile</button> 
                            </form>
                        </div> -->
                    </div>
                </div>
            </div>
            <div class="col-md-8" >
                <!-- <div class="container position-relative">
                    <div class="position-absolute top-0 end-0" id="flags">
                        <div class="flag" data-language="es">
                            <img src="{% static 'Formulario/images/flag.png' %}" alt="" class="rounded float-end" style="width: 5%; margin-left: 15px; margin-right: 15px;">
                        </div>
                        <div class="flag" data-language="en">
                            <img src="{% static 'Formulario/images/united-kingdom.png' %}" class="rounded float-end" alt="" style="width: 5%;">
                        </div>
                    </div>
                </div> -->
                <div class="row" style="margin-top: 90px; margin-left: 50px; margin-right: 50px;">  
                    <div style="overflow-x: auto; width: 100%;">
                        <h2 data-section="table" data-value="employees-title">Empleados</h2>
                        <table class="table" style="background-color: #F2F2F2;">
                            <thead>
                                <tr>
                                    <th data-section="table" data-value="name-title">Nombres y apellidos</th>
                                    <th data-section="table" data-value="position-title">Cargo</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for employee in employees %}
                            <tr>
                                <td>{{ employee.name }}</td>
                                <td>{{ employee.position }}</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
    
                <div class="row" style="margin-top: 70px; margin-left: 50px; margin-right: 50px;"> 
                    <div style="overflow-x: auto; width: 100%;">
                        <h2 data-section="table" data-value="evaluations-title">Evaluaciones Habilitadas</h2>
                        <table class="table" style="background-color: #F2F2F2;">
                            <thead>
                                <tr>
                                    <th>Evaluacion</th>
                                    <th>Fecha</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for form in forms %}
                            <tr>
                                <td>{{ form.title }}</td>
                                <td>{{ form.end_date }}</td>
                            </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <form method="POST" action="{% url 'Formulario:createFormView' %}">
                    {% csrf_token %}
                    <button type="submit" style="background-color: #43A941; margin-top: 20px; margin-bottom: 20px; margin-right: 50px; text-align:center; float: right;">Create a new evaluation</button>
                </form>   
            </div>
        </div>
    </main>
    <!-- quiero aplicar esto para toda la pagina "<script src="{% static 'Inicio_sesion/js/language.js' %}"></script>" 
     
    -->
    
    <script src="{% static 'Formulario/js/language.js' %}"></script>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var readURL = function (input) {
                if (input.files && input.files[0]) {
                    var reader = new FileReader();

                    reader.onload = function (e) {
                        $('.avatar').attr('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }

            $(".file-upload").on('change', function () {
                readURL(this);
            });
        });
    </script>
</body>
</html>
